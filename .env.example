# =============================================================================
# AuthVader - Environment Configuration
# =============================================================================
#
# Copy this file to .env and update values:
#   cp .env.example .env
#
# =============================================================================

# =============================================================================
# DATABASE (Required)
# =============================================================================
# Option 1: Full DATABASE_URL
DATABASE_URL=postgresql://authvader:localdev123@localhost:5432/authvader

# Option 2: Individual components (docker-compose builds URL from these)
# DB_HOST=localhost
# DB_USERNAME=authvader
# DB_PASSWORD=localdev123
# DB_DATABASE=authvader

# =============================================================================
# APPLICATION (Required)
# =============================================================================
# Base URL - used for OAuth issuer, redirects, email links, CORS
# Must include protocol (http/https) and NO trailing slash
BASE_URL=http://localhost:8000

# Server port
PORT=8000

# Environment (development | production)
NODE_ENV=development

# =============================================================================
# SECURITY (Required)
# =============================================================================
# Signing Key Secret - 32 bytes as hex (64 characters)
# Used for JWT signing, encryption, HMAC signatures
#
# Generate with:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# ⚠️  CHANGE THIS IN PRODUCTION!
# ⚠️  If you change this, all existing sessions/tokens become invalid
SIGNING_KEY_SECRET=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# Cookie secure flag - set to 'false' for local HTTP development
# Default: true in production (NODE_ENV=production), false otherwise
COOKIE_SECURE=false

# =============================================================================
# CORS (Optional)
# =============================================================================
# Additional CORS origins (comma-separated)
# Supports wildcards: https://*.example.com
# BASE_URL is automatically included
# CORS_ORIGINS=https://app.example.com,https://admin.example.com

# =============================================================================
# EMAIL - SendGrid (Optional)
# =============================================================================
# If not set, emails are logged to console (fine for local dev)
#
# SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxx
# SENDGRID_FROM_EMAIL=noreply@yourdomain.com
# SENDGRID_FROM_NAME=AuthVader

# =============================================================================
# SUPER ADMIN BOOTSTRAP (Optional)
# =============================================================================
# Email for the initial super admin account (created on first run)
# A password reset email is sent to this address
SUPER_ADMIN_EMAIL=admin@localhost

# Alternative: Set a default password (NOT recommended for production)
# DEFAULT_SUPER_ADMIN_EMAIL=admin@localhost
# DEFAULT_SUPER_ADMIN_PASSWORD=changeme123

# =============================================================================
# KEY ROTATION (Optional)
# =============================================================================
# How often to rotate JWT signing keys (in seconds)
# Default: 604800 (7 days)
# KEY_ROTATION_INTERVAL_SECONDS=604800

# =============================================================================
# RUN MODE (Docker only)
# =============================================================================
# Controls startup behavior in Docker:
#
#   full       - Run migrations + bootstrap, then start API (default)
#   production - Start API only (use when migrations run separately)
#   migration  - Run migrations + bootstrap, then exit
#
RUN_MODE=full
